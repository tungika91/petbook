{"ast":null,"code":"var _jsxFileName = \"/Users/tungngo/Dropbox/Personal/Learning/React/petbook/src/context/DataContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect, useRef } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport api from '../api/posts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataContext = /*#__PURE__*/createContext({});\nexport const DataProvider = ({\n  children\n}) => {\n  _s();\n\n  const API_URL = 'http://127.0.0.1:5000/users/7/pets';\n  const [pets, setPets] = useState([]);\n  /* default state is an array loaded from local storage or an empty array, in the event the database shoppinglist is deleted */\n\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]); // array of search results\n\n  const navigate = useNavigate(); // Inputs for Login\n\n  const [user, setUser] = useState('');\n  const [pwd, setPwd] = useState(''); // Inputs for Pet in POST\n\n  const [petName, setPetName] = useState('');\n  const [petType, setPetType] = useState('');\n  const [dob, setDob] = useState('');\n  const [deworm, setDeworm] = useState(format(new Date(), 'M-d-y'));\n  const [gender, setGender] = useState('');\n  const [ster, setSter] = useState('false');\n  const [petDesc, setPetDesc] = useState(''); // Inputs for Pet in PATCH\n\n  const [newPetName, setNewPetName] = useState(petName);\n  const [newPetType, setNewPetType] = useState(petType);\n  const [newDob, setNewDob] = useState(dob);\n  const [newDeworm, setNewDeworm] = useState(deworm);\n  const [newGender, setNewGender] = useState(gender);\n  const [newSter, setNewSter] = useState(ster);\n  const [newPetDesc, setNewPetDesc] = useState(petDesc); // ------------------- CREATE in CRUD ------------------- //\n\n  const addPet = async (petName, petType, dob, deworm, gender, ster, petDesc) => {\n    const id = pets.length ? pets[pets.length - 1].id + 1 : 1; // to reference the last post --> posts[posts.length-1]\n\n    const isSterilised = ster.toLowerCase() === 'true';\n    const newPet = {\n      id,\n      pet_name: petName,\n      pet_type: petType,\n      pet_dob: dob,\n      pet_gender: gender,\n      last_deworm: deworm,\n      sterilised: isSterilised,\n      pet_description: petDesc,\n      user_id: 7\n    };\n\n    try {\n      const response = await api.post('register', newPet);\n      console.log(response.data);\n      const allPets = [...pets, response.data]; // append new post to allPosts\n\n      setPets(allPets); // set Posts to allPosts\n\n      setPetName(''); // reset the setPostTitle and setPostBody to empty\n\n      setPetType('');\n      setDob('');\n      setDeworm(format(new Date(), 'M-d-y'));\n      setGender('');\n      setSter('false');\n      setPetDesc('');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!petName) return;\n    addPet(petName, petType, dob, deworm, gender, ster, petDesc); // addItem function\n\n    navigate('/'); // return to home page after submitting post\n  }; // ------------------- REQUEST in CRUD ------------------- //\n\n\n  useEffect(() => {\n    const fetchPets = async () => {\n      try {\n        // in axios, it automatically returns response in json format and catch the error, accesible through response.data\n        const response = await api.get('');\n        setPets(response.data); // response.data is in json format\n      } catch (err) {\n        if (err.response) {\n          // Not in the 200 response range\n          console.log(err.response.data);\n          console.log(err.response.status);\n          console.log(err.response.headers);\n        } else {\n          console.log(`Error: ${err.message}`);\n        }\n      }\n    };\n\n    fetchPets();\n  }, []); // [] to show dependency so it won't infinitely request from server\n  // ------------------- UPDATE in CRUD ------------------- //\n\n  const handleEdit = async id => {\n    const updatePet = {\n      id,\n      pet_type: newPetType,\n      pet_dob: newDob,\n      pet_gender: newGender,\n      last_deworm: newDeworm,\n      sterilised: newSter.toLowerCase() === 'true',\n      pet_description: newPetDesc,\n      pet_name: newPetName\n    };\n\n    try {\n      const response = await api.patch(`${id}`, updatePet);\n      console.log(response.data);\n      setPets(pets.map(pet => pet.id.toString() === id ? { ...response.data\n      } : pet)); // if pet id matches then update\n\n      setNewPetName('');\n      navigate(`/post/${id}`);\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  }; // ------------------- DELETE in CRUD ------------------- //\n\n\n  const handleDelete = async id => {\n    try {\n      await api.delete(`${id}`);\n      const petsList = pets.filter(pet => pet.id !== id); // filter out the posts with post.id not equal to the id of the post we want to delete\n\n      setPets(petsList); // setPets to the newly filtered postsList\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n\n    navigate('/');\n  }; // ------------------- Send Notification Email (not automated) ------------------- //\n\n\n  const sendEmail = async id => {\n    try {\n      const response = api.get(`${API_URL}reminder/${id}/send-email`);\n    } catch (err) {\n      if (err.response) {\n        // Not in the 200 response range\n        console.log(err.response.data);\n        console.log(err.response.status);\n        console.log(err.response.headers);\n      } else {\n        console.log(`Error: ${err.message}`);\n      }\n    }\n\n    navigate('/');\n  }; // ------------------- Filter Search Results on Home page ------------------- //\n\n\n  useEffect(() => {\n    const filteredResults = pets.filter(pet => pet.pet_name.toLowerCase().includes(search.toLowerCase()));\n    setSearchResults(filteredResults.reverse());\n  }, [pets, search]);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      search,\n      setSearch,\n      searchResults,\n      setSearchResults,\n      handleSubmit,\n      petName,\n      setPetName,\n      petType,\n      setPetType,\n      dob,\n      setDob,\n      deworm,\n      setDeworm,\n      gender,\n      setGender,\n      ster,\n      setSter,\n      petDesc,\n      setPetDesc,\n      pets,\n      handleDelete,\n      sendEmail,\n      handleEdit,\n      newPetName,\n      setNewPetName,\n      newPetType,\n      setNewPetType,\n      newDob,\n      setNewDob,\n      newDeworm,\n      setNewDeworm,\n      newGender,\n      setNewGender,\n      newSter,\n      setNewSter,\n      newPetDesc,\n      setNewPetDesc,\n      user,\n      setUser,\n      pwd,\n      setPwd\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataProvider, \"84l/NKSxSTjNmcbh7CQlviIY3rY=\", false, function () {\n  return [useNavigate];\n});\n\n_c = DataProvider;\nexport default DataContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/petbook/src/context/DataContext.js"],"names":["createContext","useState","useEffect","useRef","useNavigate","format","api","DataContext","DataProvider","children","API_URL","pets","setPets","search","setSearch","searchResults","setSearchResults","navigate","user","setUser","pwd","setPwd","petName","setPetName","petType","setPetType","dob","setDob","deworm","setDeworm","Date","gender","setGender","ster","setSter","petDesc","setPetDesc","newPetName","setNewPetName","newPetType","setNewPetType","newDob","setNewDob","newDeworm","setNewDeworm","newGender","setNewGender","newSter","setNewSter","newPetDesc","setNewPetDesc","addPet","id","length","isSterilised","toLowerCase","newPet","pet_name","pet_type","pet_dob","pet_gender","last_deworm","sterilised","pet_description","user_id","response","post","console","log","data","allPets","err","message","handleSubmit","e","preventDefault","fetchPets","get","status","headers","handleEdit","updatePet","patch","map","pet","toString","handleDelete","delete","petsList","filter","sendEmail","filteredResults","includes","reverse"],"mappings":"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","sourcesContent":["import { createContext, useState, useEffect, useRef } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport api from '../api/posts';\n\nconst DataContext = createContext({});\n\nexport const DataProvider = ({ children }) => {\n    const API_URL = 'http://127.0.0.1:5000/users/7/pets';\n    const [pets, setPets] = useState([]); /* default state is an array loaded from local storage or an empty array, in the event the database shoppinglist is deleted */\n    const [search, setSearch] = useState('');\n    const [searchResults, setSearchResults] = useState([]); // array of search results\n    const navigate = useNavigate();\n\n    // Inputs for Login\n    const [user, setUser] = useState('');\n    const [pwd, setPwd] = useState('');\n\n    // Inputs for Pet in POST\n    const [petName, setPetName] = useState('');\n    const [petType, setPetType] = useState('');\n    const [dob, setDob] = useState('');\n    const [deworm, setDeworm] = useState(format(new Date(), 'M-d-y'));\n    const [gender, setGender] = useState('');\n    const [ster, setSter] = useState('false');\n    const [petDesc, setPetDesc] = useState('');\n\n    // Inputs for Pet in PATCH\n    const [newPetName, setNewPetName] = useState(petName);\n    const [newPetType, setNewPetType] = useState(petType);\n    const [newDob, setNewDob] = useState(dob);\n    const [newDeworm, setNewDeworm] = useState(deworm);\n    const [newGender, setNewGender] = useState(gender);\n    const [newSter, setNewSter] = useState(ster);\n    const [newPetDesc, setNewPetDesc] = useState(petDesc);\n\n    // ------------------- CREATE in CRUD ------------------- //\n    const addPet = async (petName, petType, dob, deworm, gender, ster, petDesc) => {\n        const id = pets.length ? pets[pets.length - 1].id + 1 : 1; // to reference the last post --> posts[posts.length-1]\n        const isSterilised = (ster.toLowerCase()) === 'true';\n        const newPet = {\n            id,\n            pet_name: petName,\n            pet_type: petType,\n            pet_dob: dob,\n            pet_gender: gender,\n            last_deworm: deworm,\n            sterilised: isSterilised,\n            pet_description: petDesc,\n            user_id: 7\n        };\n\n        try {\n            const response = await api.post('register', newPet)\n            console.log(response.data)\n            const allPets = [...pets, response.data]; // append new post to allPosts\n            setPets(allPets); // set Posts to allPosts\n            setPetName(''); // reset the setPostTitle and setPostBody to empty\n            setPetType('');\n            setDob('');\n            setDeworm(format(new Date(), 'M-d-y'));\n            setGender('');\n            setSter('false');\n            setPetDesc('');\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        if (!petName) return;\n        addPet(petName, petType, dob, deworm, gender, ster, petDesc) // addItem function\n        navigate('/'); // return to home page after submitting post\n    }\n    // ------------------- REQUEST in CRUD ------------------- //\n    useEffect(() => {\n        const fetchPets = async () => {\n            try {\n                // in axios, it automatically returns response in json format and catch the error, accesible through response.data\n                const response = await api.get('');\n                setPets(response.data); // response.data is in json format\n            } catch (err) {\n                if (err.response) { // Not in the 200 response range\n                    console.log(err.response.data);\n                    console.log(err.response.status);\n                    console.log(err.response.headers);\n                } else { console.log(`Error: ${err.message}`) }\n            }\n        }\n        fetchPets();\n    }, []) // [] to show dependency so it won't infinitely request from server\n\n    // ------------------- UPDATE in CRUD ------------------- //\n    const handleEdit = async (id) => {\n        const updatePet = {\n            id,\n            pet_type: newPetType,\n            pet_dob: newDob,\n            pet_gender: newGender,\n            last_deworm: newDeworm,\n            sterilised: (newSter.toLowerCase()) === 'true',\n            pet_description: newPetDesc,\n            pet_name: newPetName\n        };\n        try {\n            const response = await api.patch(`${id}`, updatePet);\n            console.log(response.data)\n            setPets(pets.map(pet => (pet.id).toString() === id ? { ...response.data } : pet)) // if pet id matches then update\n            setNewPetName('')\n            navigate(`/post/${id}`)\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n    }\n    // ------------------- DELETE in CRUD ------------------- //\n    const handleDelete = async (id) => {\n        try {\n            await api.delete(`${id}`);\n            const petsList = pets.filter(pet => pet.id !== id); // filter out the posts with post.id not equal to the id of the post we want to delete\n            setPets(petsList); // setPets to the newly filtered postsList\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n        navigate('/');\n    }\n    // ------------------- Send Notification Email (not automated) ------------------- //\n    const sendEmail = async (id) => {\n        try {\n            const response = api.get(`${API_URL}reminder/${id}/send-email`);\n        } catch (err) {\n            if (err.response) {\n                // Not in the 200 response range\n                console.log(err.response.data);\n                console.log(err.response.status);\n                console.log(err.response.headers);\n            } else { console.log(`Error: ${err.message}`) }\n        }\n        navigate('/');\n    }\n    // ------------------- Filter Search Results on Home page ------------------- //\n    useEffect(() => {\n        const filteredResults = pets.filter((pet) =>\n            ((pet.pet_name).toLowerCase()).includes(search.toLowerCase()));\n        setSearchResults(filteredResults.reverse());\n    }, [pets, search])\n    \n    return (\n        <DataContext.Provider value={{\n            search, setSearch,\n            searchResults, setSearchResults,\n            handleSubmit, petName, setPetName, petType, setPetType, dob, setDob, deworm, setDeworm, gender, setGender, ster, setSter, petDesc, setPetDesc,\n            pets, handleDelete, sendEmail,\n            handleEdit, newPetName, setNewPetName, newPetType, setNewPetType, newDob, setNewDob, newDeworm, setNewDeworm, newGender, setNewGender, newSter, setNewSter, newPetDesc, setNewPetDesc,\n            user, setUser, pwd, setPwd\n        }}>\n            {children}\n        </DataContext.Provider>\n    )\n}\n\nexport default DataContext;"]},"metadata":{},"sourceType":"module"}