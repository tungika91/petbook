{"ast":null,"code":"var _jsxFileName = \"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/src/medicals/EditPetMedicalRecord.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport DataContext from '../context/DataContext';\nimport api from '../api/posts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EditPetMedicalRecord = () => {\n  _s();\n\n  const navigate = useNavigate(); // Inputs for Pet in PATCH\n\n  const {\n    medicalRecord,\n    userID,\n    setMedicalRecord,\n    auth\n  } = useContext(DataContext);\n  console.log(medicalRecord);\n  const {\n    id,\n    record_id\n  } = useParams(); // extract the id from the link\n\n  console.log(record_id);\n  const record = medicalRecord.find(record => record.id.toString() === record_id);\n  const [newClinic, setNewClinic] = useState('');\n  const [newDoctor, setNewDoctor] = useState('');\n  const [newAddress, setNewAddress] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [newDate, setNewDate] = useState('');\n  const [newReason, setNewReason] = useState('');\n  useEffect(() => {\n    // To pre-fill the form with existing info\n    if (record) {\n      setNewClinic(record.clinic);\n      setNewDoctor(record.doctor);\n      setNewAddress(record.address);\n      setNewPhone(record.phone);\n      setNewDate(record.date);\n      setNewReason(record.agenda);\n    }\n  }, [record, setNewClinic, setNewDoctor, setNewAddress, setNewPhone, setNewDate, setNewReason]);\n\n  const handleMedicalEdit = async record_id => {\n    const updateMedical = {\n      id: record_id,\n      date: newDate,\n      clinic: newClinic,\n      // address: newAddress,\n      // phone: newPhone,\n      doctor: newDoctor // agenda: newReason\n\n    };\n\n    try {\n      const response = await api.patch(`${userID}/pets/${id}/medical/${record_id}`, updateMedical, {\n        headers: {\n          'x-access-token': auth.accessToken\n        }\n      });\n      console.log(response.data); // setMedicalRecord(pets.map(pet => (pet.id).toString() === id ? { ...response.data } : pet)) // if pet id matches then update\n      // navigate(`/post/${id}`)\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"NewPost\",\n    children: [record && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Edit Medical Record\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"newPostForm\",\n        onSubmit: e => e.preventDefault(),\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newDate,\n          onChange: e => setNewDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Clinic:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newClinic,\n          onChange: e => setNewClinic(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Address:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newAddress,\n          onChange: e => setNewAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Phone:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newPhone,\n          onChange: e => setNewPhone(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Doctor:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newDoctor,\n          onChange: e => setNewDoctor(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postTitle\",\n          children: \"Reason:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"postTitle\",\n          type: \"text\",\n          required: true,\n          value: newReason,\n          onChange: e => setNewReason(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onClick: () => handleMedicalEdit(record_id),\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), !record && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Page Not Found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Well, that's disappointing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"Visit Our Homepage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditPetMedicalRecord, \"0ircaGn/Pi6MLjQdIdOcbn2ex94=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = EditPetMedicalRecord;\nexport default EditPetMedicalRecord;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPetMedicalRecord\");","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/src/medicals/EditPetMedicalRecord.js"],"names":["useEffect","useState","useParams","Link","useNavigate","useContext","DataContext","api","EditPetMedicalRecord","navigate","medicalRecord","userID","setMedicalRecord","auth","console","log","id","record_id","record","find","toString","newClinic","setNewClinic","newDoctor","setNewDoctor","newAddress","setNewAddress","newPhone","setNewPhone","newDate","setNewDate","newReason","setNewReason","clinic","doctor","address","phone","date","agenda","handleMedicalEdit","updateMedical","response","patch","headers","accessToken","data","err","message","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport DataContext from '../context/DataContext';\nimport api from '../api/posts';\n\nexport const EditPetMedicalRecord = () => {\n    const navigate = useNavigate();\n\n    // Inputs for Pet in PATCH\n    const { medicalRecord, userID, setMedicalRecord, auth } = useContext(DataContext);\n    console.log(medicalRecord);\n    const { id, record_id } = useParams(); // extract the id from the link\n    console.log(record_id)\n    const record = medicalRecord.find(record => (record.id).toString() === record_id);\n    const [newClinic, setNewClinic] = useState('');\n    const [newDoctor, setNewDoctor] = useState('');\n    const [newAddress, setNewAddress] = useState('');\n    const [newPhone, setNewPhone] = useState('');\n    const [newDate, setNewDate] = useState('');\n    const [newReason, setNewReason] = useState('');\n\n    useEffect(() => {\n        // To pre-fill the form with existing info\n        if (record) {\n            setNewClinic(record.clinic);\n            setNewDoctor(record.doctor);\n            setNewAddress(record.address);\n            setNewPhone(record.phone);\n            setNewDate(record.date);\n            setNewReason(record.agenda);\n        }\n    }, [record, setNewClinic, setNewDoctor, setNewAddress, setNewPhone,  setNewDate, setNewReason])\n    \n    const handleMedicalEdit = async (record_id) => {\n        const updateMedical = {\n            id: record_id,\n            date: newDate,\n            clinic: newClinic,\n            // address: newAddress,\n            // phone: newPhone,\n            doctor: newDoctor,\n            // agenda: newReason\n        };\n        try {\n            const response = await api.patch(`${userID}/pets/${id}/medical/${record_id}`, updateMedical, {\n                headers: {\n                    'x-access-token': auth.accessToken\n                }\n            });\n            console.log(response.data)\n            // setMedicalRecord(pets.map(pet => (pet.id).toString() === id ? { ...response.data } : pet)) // if pet id matches then update\n            // navigate(`/post/${id}`)\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n    }\n\n    return (\n        <main className=\"NewPost\">\n            {record &&\n                <>\n                    <h2>Edit Medical Record</h2>\n                    <form className=\"newPostForm\" onSubmit={(e)=>e.preventDefault()}>\n                        <label htmlFor=\"postTitle\">Date:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newDate }\n                            onChange={(e) => setNewDate(e.target.value)}\n                        />\n                        <label htmlFor=\"postTitle\">Clinic:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newClinic }\n                            onChange={(e) => setNewClinic(e.target.value)}\n                        />\n                        <label htmlFor=\"postTitle\">Address:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newAddress }\n                            onChange={(e) => setNewAddress(e.target.value)}\n                        />\n                        <label htmlFor=\"postTitle\">Phone:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newPhone }\n                            onChange={(e) => setNewPhone(e.target.value)}\n                        />\n                        <label htmlFor=\"postTitle\">Doctor:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newDoctor }\n                            onChange={(e) => setNewDoctor(e.target.value)}\n                        />\n                        <label htmlFor=\"postTitle\">Reason:</label>\n                        <input\n                            id=\"postTitle\"\n                            type=\"text\"\n                            required\n                            value={ newReason }\n                            onChange={(e) => setNewReason(e.target.value)}\n                        />\n                        <button type=\"submit\" onClick={() => handleMedicalEdit(record_id)}>Submit</button>\n\n                    </form>\n                </>\n            }\n\n            {!record && \n                <>\n                    <h2>Page Not Found</h2>\n                    <p>Well, that's disappointing.</p>\n                    <p>\n                        <Link to='/'>Visit Our Homepage</Link>\n                    </p>\n                </>\n            }\n        </main>\n    )\n}\n\nexport default EditPetMedicalRecord"]},"metadata":{},"sourceType":"module"}