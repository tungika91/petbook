{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext}from\"react\";import{useState}from\"react\";import DataContext from'./context/DataContext';import api from'./api/axios';import{MdOutlineFileUpload}from\"react-icons/md\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ImageUpload=function ImageUpload(_ref){var pet_id=_ref.pet_id;var _useContext=useContext(DataContext),userID=_useContext.userID,auth=_useContext.auth,navigate=_useContext.navigate;var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var handleFile=function handleFile(e){console.log(e.target.files[0]);setFile(e.target.files[0]);};var handleUpload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append('file',file);_context.next=4;return api.post(\"\".concat(userID,\"/pets/\").concat(pet_id,\"/upload\"),formData,{headers:{'x-access-token':auth.accessToken}});case 4:response=_context.sent;console.log(response.data);navigate('/');case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleUpload(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{class:\"file-upload\",type:\"file\",name:\"file\",onChange:function onChange(e){return handleFile(e);}}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleUpload,children:[\" \",/*#__PURE__*/_jsx(MdOutlineFileUpload,{}),\" \"]})]});};export default ImageUpload;","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/src/ImageUpload.js"],"names":["useContext","useState","DataContext","api","MdOutlineFileUpload","ImageUpload","pet_id","userID","auth","navigate","file","setFile","handleFile","e","console","log","target","files","handleUpload","formData","FormData","append","post","headers","accessToken","response","data"],"mappings":"qiBAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,OAASC,mBAAT,KAAoC,gBAApC,C,6IAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,CAChC,gBAAmCN,UAAU,CAACE,WAAD,CAA7C,CAAQK,MAAR,aAAQA,MAAR,CAAgBC,IAAhB,aAAgBA,IAAhB,CAAsBC,QAAtB,aAAsBA,QAAtB,CACA,cAAwBR,QAAQ,EAAhC,wCAAOS,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAO,CACtBC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAZ,EACAN,OAAO,CAACE,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP,CACH,CAHD,CAKA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOL,CAAP,wIACXM,QADW,CACA,GAAIC,CAAAA,QAAJ,EADA,CAEjBD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBX,IAAxB,EAFiB,sBAGMP,CAAAA,GAAG,CAACmB,IAAJ,WAAYf,MAAZ,kBAA2BD,MAA3B,YAA4Ca,QAA5C,CAAsD,CACzEI,OAAO,CAAE,CACL,iBAAkBf,IAAI,CAACgB,WADlB,CADgE,CAAtD,CAHN,QAGXC,QAHW,eAQjBX,OAAO,CAACC,GAAR,CAAYU,QAAQ,CAACC,IAArB,EACAjB,QAAQ,CAAC,GAAD,CAAR,CATiB,sDAAH,kBAAZS,CAAAA,YAAY,6CAAlB,CAYA,mBACI,wCACI,cAAO,KAAK,CAAC,aAAb,CAA2B,IAAI,CAAC,MAAhC,CAAuC,IAAI,CAAC,MAA5C,CAAmD,QAAQ,CAAE,kBAACL,CAAD,QAAOD,CAAAA,UAAU,CAACC,CAAD,CAAjB,EAA7D,EADJ,cAEI,gBAAQ,OAAO,CAAEK,YAAjB,WAA+B,GAA/B,cAAgC,KAAC,mBAAD,IAAhC,CAAsD,GAAtD,GAFJ,GADJ,CAMH,CA3BD,CA6BA,cAAeb,CAAAA,WAAf","sourcesContent":["import { useContext } from \"react\"\nimport { useState } from \"react\";\nimport DataContext from './context/DataContext';\nimport api from './api/axios';\nimport { MdOutlineFileUpload } from \"react-icons/md\";\n\n\nconst ImageUpload = ({ pet_id }) => {\n    const { userID, auth, navigate } = useContext(DataContext);\n    const [file, setFile] = useState();\n\n    const handleFile = (e) => {\n        console.log(e.target.files[0]);\n        setFile(e.target.files[0]);\n    }\n\n    const handleUpload = async (e) => {\n        const formData = new FormData();\n        formData.append('file', file);\n        const response = await api.post(`${userID}/pets/${pet_id}/upload`, formData, {\n            headers: {\n                'x-access-token': auth.accessToken\n            }\n        });\n        console.log(response.data);\n        navigate('/');\n    }\n\n    return (\n        <>\n            <input class=\"file-upload\" type=\"file\" name='file' onChange={(e) => handleFile(e)}/>\n            <button onClick={handleUpload}> <MdOutlineFileUpload/> </button>\n        </>\n    )\n}\n\nexport default ImageUpload\n"]},"metadata":{},"sourceType":"module"}