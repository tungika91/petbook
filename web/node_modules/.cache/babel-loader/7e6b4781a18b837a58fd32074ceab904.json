{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useContext}from\"react\";import DataContext from'./context/DataContext';import api from'./api/axios';import{MdOutlineFileDownload}from\"react-icons/md\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FileDownload=function FileDownload(_ref){var record_id=_ref.record_id,pet_id=_ref.pet_id;var _useContext=useContext(DataContext),userID=_useContext.userID,auth=_useContext.auth;var handleDownload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"\".concat(userID,\"/pets/\").concat(pet_id,\"/medical/\").concat(record_id,\"/download\"),{headers:{'x-access-token':auth.accessToken}}).then(function(response){// Open in new tab in browser\nvar res=response.data;res['error']?alert(res['error']):window.open(res);}).catch(function(error){console.log(error);});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",{error:_context.t0});case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function handleDownload(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleDownload,children:[\" \",/*#__PURE__*/_jsx(MdOutlineFileDownload,{}),\" \"]})});};export default FileDownload;","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/src/FileDownload.js"],"names":["useContext","DataContext","api","MdOutlineFileDownload","FileDownload","record_id","pet_id","userID","auth","handleDownload","get","headers","accessToken","then","response","res","data","alert","window","open","catch","error","console","log"],"mappings":"6WAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,OAASC,qBAAT,KAAsC,gBAAtC,C,6IAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA2B,IAAxBC,CAAAA,SAAwB,MAAxBA,SAAwB,CAAbC,MAAa,MAAbA,MAAa,CAC5C,gBAAyBN,UAAU,CAACC,WAAD,CAAnC,CAAQM,MAAR,aAAQA,MAAR,CAAgBC,IAAhB,aAAgBA,IAAhB,CAEA,GAAMC,CAAAA,cAAc,2FAAG,yKAELP,CAAAA,GAAG,CAACQ,GAAJ,WAAWH,MAAX,kBAA0BD,MAA1B,qBAA4CD,SAA5C,cAAkE,CACxEM,OAAO,CAAE,CACL,iBAAkBH,IAAI,CAACI,WADlB,CAD+D,CAAlE,EAKTC,IALS,CAKJ,SAACC,QAAD,CAAc,CAChB;AACA,GAAMC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAArB,CACAD,GAAG,CAAC,OAAD,CAAH,CAAeE,KAAK,CAACF,GAAG,CAAC,OAAD,CAAJ,CAApB,CAAqCG,MAAM,CAACC,IAAP,CAAYJ,GAAZ,CAArC,CACH,CATS,EAUTK,KAVS,CAUH,SAACC,KAAD,CAAW,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAZS,CAFK,sHAiBR,CAAEA,KAAK,YAAP,CAjBQ,qEAAH,kBAAdZ,CAAAA,cAAc,2CAApB,CAoBA,mBACI,sCACI,gBAAQ,OAAO,CAAEA,cAAjB,WAAiC,GAAjC,cAAkC,KAAC,qBAAD,IAAlC,CAA0D,GAA1D,GADJ,EADJ,CAKH,CA5BD,CA8BA,cAAeL,CAAAA,YAAf","sourcesContent":["import { useContext } from \"react\"\nimport DataContext from './context/DataContext';\nimport api from './api/axios';\nimport { MdOutlineFileDownload } from \"react-icons/md\";\n\nconst FileDownload = ({ record_id, pet_id }) => {\n    const { userID, auth } = useContext(DataContext);\n\n    const handleDownload = async () => {\n        try {\n                await api.get(`${userID}/pets/${pet_id}/medical/${record_id}/download`, {\n                headers: {\n                    'x-access-token': auth.accessToken\n                }\n            })\n            .then((response) => {\n                // Open in new tab in browser\n                const res = response.data\n                res['error'] ? alert(res['error']) : window.open(res);        \n            })\n            .catch((error) => {\n                console.log(error);\n            });\n        }\n        catch (error) {\n            return { error };\n        }\n    }\n    return (\n        <>\n            <button onClick={handleDownload}> <MdOutlineFileDownload/> </button>\n        </>\n    )\n}\n\nexport default FileDownload"]},"metadata":{},"sourceType":"module"}