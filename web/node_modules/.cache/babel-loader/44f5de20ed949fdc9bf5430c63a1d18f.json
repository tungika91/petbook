{"ast":null,"code":"var _jsxFileName = \"/Users/tungngo/Dropbox/Personal/Learning/React/petbook/src/context/DataContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from \"react\";\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport api from '../api/posts';\nimport useWindowSize from '../hooks/useWindowSize';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataContext = /*#__PURE__*/createContext({});\nexport const DataProvider = ({\n  children\n}) => {\n  _s();\n\n  const API_URL = 'http://127.0.0.1:5000/pets/';\n  const [pets, setPets] = useState([]);\n  /* default state is an array loaded from local storage or an empty array, in the event the database shoppinglist is deleted */\n\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]); // array of search results\n  // const [edit, setEdit] = useState('');\n\n  const navigate = useNavigate(); // Inputs for Pet in POST\n\n  const [petName, setPetName] = useState('');\n  const [petType, setPetType] = useState('');\n  const [dob, setDob] = useState('');\n  const [deworm, setDeworm] = useState(format(new Date(), 'M-d-y'));\n  const [gender, setGender] = useState('');\n  const [ster, setSter] = useState('false');\n  const [petDesc, setPetDesc] = useState(''); // Inputs for Pet in PATCH\n\n  const [newPetName, setNewPetName] = useState(petName);\n  const [newPetType, setNewPetType] = useState(petType);\n  const [newDob, setNewDob] = useState(dob);\n  const [newDeworm, setNewDeworm] = useState(deworm);\n  const [newGender, setNewGender] = useState(gender);\n  const [newSter, setNewSter] = useState(ster);\n  const [newPetDesc, setNewPetDesc] = useState(petDesc);\n  const {\n    width\n  } = useWindowSize(); // ------------------- CREATE in CRUD ------------------- //\n\n  const addPet = async (petName, petType, dob, deworm, gender, ster, petDesc) => {\n    const id = pets.length ? pets[pets.length - 1].id + 1 : 1; // to reference the last post --> posts[posts.length-1]\n\n    const isSterilised = ster.toLowerCase() === 'true';\n    const newPet = {\n      id,\n      pet_name: petName,\n      pet_type: petType,\n      pet_dob: dob,\n      pet_gender: gender,\n      last_deworm: deworm,\n      sterilised: isSterilised,\n      pet_description: petDesc,\n      user_id: 7\n    };\n\n    try {\n      const response = await api.post('register', newPet);\n      console.log(response.data);\n      const allPets = [...pets, response.data]; // append new post to allPosts\n\n      setPets(allPets); // set Posts to allPosts\n\n      setPetName(''); // reset the setPostTitle and setPostBody to empty\n\n      setPetType('');\n      setDob('');\n      setDeworm(format(new Date(), 'M-d-y'));\n      setGender('');\n      setSter('false');\n      setPetDesc('');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!petName) return;\n    addPet(petName, petType, dob, deworm, gender, ster, petDesc); // addItem function\n\n    navigate('/'); // return to home page after submitting post\n  }; // ------------------- REQUEST in CRUD ------------------- //\n\n\n  useEffect(() => {\n    const fetchPets = async () => {\n      try {\n        // in axios, it automatically returns response in json format and catch the error, accesible through response.data\n        const response = await api.get('');\n        setPets(response.data); // response.data is in json format\n      } catch (err) {\n        if (err.response) {\n          // Not in the 200 response range\n          console.log(err.response.data);\n          console.log(err.response.status);\n          console.log(err.response.headers);\n        } else {\n          console.log(`Error: ${err.message}`);\n        }\n      }\n    };\n\n    fetchPets();\n  }, []); // [] to show dependency so it won't infinitely request from server\n  // ------------------- UPDATE in CRUD ------------------- //\n\n  const handleEdit = async id => {\n    const updatePet = {\n      id,\n      pet_type: newPetType,\n      pet_dob: newDob,\n      pet_gender: newGender,\n      last_deworm: newDeworm,\n      sterilised: newSter.toLowerCase() === 'true',\n      pet_description: newPetDesc,\n      pet_name: newPetName\n    };\n\n    try {\n      const response = await api.patch(`${id}`, updatePet);\n      console.log(response.data);\n      setPets(pets.map(pet => pet.id.toString() === id ? { ...response.data\n      } : pet)); // if pet id matches then update\n\n      setNewPetName('');\n      navigate(`/post/${id}`);\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  }; // ------------------- DELETE in CRUD ------------------- //\n\n\n  const handleDelete = async id => {\n    try {\n      await api.delete(`${id}`);\n      const petsList = pets.filter(pet => pet.id !== id); // filter out the posts with post.id not equal to the id of the post we want to delete\n\n      setPets(petsList); // setPets to the newly filtered postsList\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n\n    navigate('/');\n  }; // ------------------- Send Notification Email (not automated) ------------------- //\n\n\n  const sendEmail = async id => {\n    try {\n      const response = api.get(`${API_URL}reminder/${id}/send-email`);\n    } catch (err) {\n      if (err.response) {\n        // Not in the 200 response range\n        console.log(err.response.data);\n        console.log(err.response.status);\n        console.log(err.response.headers);\n      } else {\n        console.log(`Error: ${err.message}`);\n      }\n    }\n\n    navigate('/');\n  }; // ------------------- Filter Search Results on Home page ------------------- //\n\n\n  useEffect(() => {\n    const filteredResults = pets.filter(pet => pet.pet_name.toLowerCase().includes(search.toLowerCase()));\n    setSearchResults(filteredResults.reverse());\n  }, [pets, search]);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      width,\n      search,\n      setSearch,\n      searchResults,\n      setSearchResults,\n      handleSubmit,\n      petName,\n      setPetName,\n      petType,\n      setPetType,\n      dob,\n      setDob,\n      deworm,\n      setDeworm,\n      gender,\n      setGender,\n      ster,\n      setSter,\n      petDesc,\n      setPetDesc\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DataProvider, \"kLVZo3t8G9kIp1jgPHca52M69RQ=\", false, function () {\n  return [useNavigate, useWindowSize];\n});\n\n_c = DataProvider;\nexport default DataContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/petbook/src/context/DataContext.js"],"names":["createContext","useState","useEffect","Route","Routes","useNavigate","format","api","useWindowSize","DataContext","DataProvider","children","API_URL","pets","setPets","search","setSearch","searchResults","setSearchResults","navigate","petName","setPetName","petType","setPetType","dob","setDob","deworm","setDeworm","Date","gender","setGender","ster","setSter","petDesc","setPetDesc","newPetName","setNewPetName","newPetType","setNewPetType","newDob","setNewDob","newDeworm","setNewDeworm","newGender","setNewGender","newSter","setNewSter","newPetDesc","setNewPetDesc","width","addPet","id","length","isSterilised","toLowerCase","newPet","pet_name","pet_type","pet_dob","pet_gender","last_deworm","sterilised","pet_description","user_id","response","post","console","log","data","allPets","err","message","handleSubmit","e","preventDefault","fetchPets","get","status","headers","handleEdit","updatePet","patch","map","pet","toString","handleDelete","delete","petsList","filter","sendEmail","filteredResults","includes","reverse"],"mappings":"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","sourcesContent":["import { createContext, useState, useEffect } from \"react\";\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport api from '../api/posts';\nimport useWindowSize from '../hooks/useWindowSize';\n\nconst DataContext = createContext({});\n\nexport const DataProvider = ({ children }) => {\n    const API_URL = 'http://127.0.0.1:5000/pets/';\n    const [pets, setPets] = useState([]); /* default state is an array loaded from local storage or an empty array, in the event the database shoppinglist is deleted */\n    const [search, setSearch] = useState('');\n    const [searchResults, setSearchResults] = useState([]); // array of search results\n    // const [edit, setEdit] = useState('');\n    const navigate = useNavigate();\n\n    // Inputs for Pet in POST\n    const [petName, setPetName] = useState('');\n    const [petType, setPetType] = useState('');\n    const [dob, setDob] = useState('');\n    const [deworm, setDeworm] = useState(format(new Date(), 'M-d-y'));\n    const [gender, setGender] = useState('');\n    const [ster, setSter] = useState('false');\n    const [petDesc, setPetDesc] = useState('');\n\n    // Inputs for Pet in PATCH\n    const [newPetName, setNewPetName] = useState(petName);\n    const [newPetType, setNewPetType] = useState(petType);\n    const [newDob, setNewDob] = useState(dob);\n    const [newDeworm, setNewDeworm] = useState(deworm);\n    const [newGender, setNewGender] = useState(gender);\n    const [newSter, setNewSter] = useState(ster);\n    const [newPetDesc, setNewPetDesc] = useState(petDesc);\n    const { width } = useWindowSize();\n\n    // ------------------- CREATE in CRUD ------------------- //\n    const addPet = async (petName, petType, dob, deworm, gender, ster, petDesc) => {\n        const id = pets.length ? pets[pets.length - 1].id + 1 : 1; // to reference the last post --> posts[posts.length-1]\n        const isSterilised = (ster.toLowerCase()) === 'true';\n        const newPet = {\n            id,\n            pet_name: petName,\n            pet_type: petType,\n            pet_dob: dob,\n            pet_gender: gender,\n            last_deworm: deworm,\n            sterilised: isSterilised,\n            pet_description: petDesc,\n            user_id: 7\n        };\n\n        try {\n            const response = await api.post('register', newPet)\n            console.log(response.data)\n            const allPets = [...pets, response.data]; // append new post to allPosts\n            setPets(allPets); // set Posts to allPosts\n            setPetName(''); // reset the setPostTitle and setPostBody to empty\n            setPetType('');\n            setDob('');\n            setDeworm(format(new Date(), 'M-d-y'));\n            setGender('');\n            setSter('false');\n            setPetDesc('');\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        if (!petName) return;\n        addPet(petName, petType, dob, deworm, gender, ster, petDesc) // addItem function\n        navigate('/'); // return to home page after submitting post\n    }\n\n    // ------------------- REQUEST in CRUD ------------------- //\n    useEffect(() => {\n        const fetchPets = async () => {\n            try {\n                // in axios, it automatically returns response in json format and catch the error, accesible through response.data\n                const response = await api.get('');\n                setPets(response.data); // response.data is in json format\n            } catch (err) {\n                if (err.response) { // Not in the 200 response range\n                    console.log(err.response.data);\n                    console.log(err.response.status);\n                    console.log(err.response.headers);\n                } else { console.log(`Error: ${err.message}`) }\n            }\n        }\n        fetchPets();\n    }, []) // [] to show dependency so it won't infinitely request from server\n\n    // ------------------- UPDATE in CRUD ------------------- //\n    const handleEdit = async (id) => {\n        const updatePet = {\n            id,\n            pet_type: newPetType,\n            pet_dob: newDob,\n            pet_gender: newGender,\n            last_deworm: newDeworm,\n            sterilised: (newSter.toLowerCase()) === 'true',\n            pet_description: newPetDesc,\n            pet_name: newPetName\n        };\n        try {\n            const response = await api.patch(`${id}`, updatePet);\n            console.log(response.data)\n            setPets(pets.map(pet => (pet.id).toString() === id ? { ...response.data } : pet)) // if pet id matches then update\n            setNewPetName('')\n            navigate(`/post/${id}`)\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n    }\n    // ------------------- DELETE in CRUD ------------------- //\n    const handleDelete = async (id) => {\n        try {\n            await api.delete(`${id}`);\n            const petsList = pets.filter(pet => pet.id !== id); // filter out the posts with post.id not equal to the id of the post we want to delete\n            setPets(petsList); // setPets to the newly filtered postsList\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n        navigate('/');\n    }\n\n    // ------------------- Send Notification Email (not automated) ------------------- //\n    const sendEmail = async (id) => {\n        try {\n            const response = api.get(`${API_URL}reminder/${id}/send-email`);\n        } catch (err) {\n            if (err.response) {\n                // Not in the 200 response range\n                console.log(err.response.data);\n                console.log(err.response.status);\n                console.log(err.response.headers);\n            } else { console.log(`Error: ${err.message}`) }\n        }\n        navigate('/');\n    }\n\n    // ------------------- Filter Search Results on Home page ------------------- //\n    useEffect(() => {\n        const filteredResults = pets.filter((pet) =>\n            ((pet.pet_name).toLowerCase()).includes(search.toLowerCase()));\n        setSearchResults(filteredResults.reverse());\n    }, [pets, search])\n    \n    return (\n        <DataContext.Provider value={{\n            width, search, setSearch,\n            searchResults, setSearchResults,\n            handleSubmit, petName, setPetName, petType, setPetType, dob, setDob, deworm, setDeworm, gender, setGender, ster, setSter, petDesc, setPetDesc\n        }}>\n            {children}\n        </DataContext.Provider>\n    )\n}\n\nexport default DataContext;"]},"metadata":{},"sourceType":"module"}