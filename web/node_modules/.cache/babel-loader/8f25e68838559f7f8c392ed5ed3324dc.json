{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link,useNavigate,useParams}from'react-router-dom';import{useContext,useState}from'react';import DataContext from'../context/DataContext';import api from'../api/axios';import FileUpload from\"../FileUpload\";import FileDownload from'../FileDownload';import{MdDeleteForever,MdEditSquare,MdKeyboardDoubleArrowDown,MdKeyboardDoubleArrowUp}from\"react-icons/md\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PetMedicalRecord=function PetMedicalRecord(_ref){var record=_ref.record,pet_id=_ref.pet_id;var _useContext=useContext(DataContext),userID=_useContext.userID,auth=_useContext.auth;var _useParams=useParams(),id=_useParams.id;// extract the id from the link\nvar navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),popUpMenu=_useState2[0],setPopUpMenu=_useState2[1];function PopUpMenu(){return/*#__PURE__*/_jsxs(\"ul\",{className:\"drop-down\",children:[/*#__PURE__*/_jsx(Link,{to:\"\".concat(record.id,\"/edit\"),state:record,children:/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(MdEditSquare,{})})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){var confirmBox=window.confirm(\"Do you really want to remove this record?\");confirmBox?handleMedicalDelete():console.log('No');},children:/*#__PURE__*/_jsx(MdDeleteForever,{})}),/*#__PURE__*/_jsx(FileDownload,{record_id:record.id,pet_id:pet_id}),/*#__PURE__*/_jsx(FileUpload,{record_id:record.id,pet_id:pet_id})]});}var handleMedicalDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.delete(\"\".concat(userID,\"/pets/\").concat(id,\"/medical/\").concat(record.id),{headers:{'x-access-token':auth.accessToken}});case 3:navigate(\"/post/\".concat(id,\"/medical\"));_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(\"Error: \".concat(_context.t0.message));case 9:navigate('/');case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function handleMedicalDelete(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"record\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"recordTitle\",children:record.date}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"ID: \",record.id]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Clinic: \",record.clinic]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Address: \",record.address]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Phone: \",record.phone]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Doctor: \",record.doctor]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Reason: \",record.agenda]}),/*#__PURE__*/_jsxs(\"li\",{className:\"recordList\",children:[\"Attachment: \",record.attachment]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setPopUpMenu(!popUpMenu);},children:popUpMenu?/*#__PURE__*/_jsx(MdKeyboardDoubleArrowUp,{}):/*#__PURE__*/_jsx(MdKeyboardDoubleArrowDown,{})}),popUpMenu&&PopUpMenu()]})});};// sending props down Link through state. Then prop can be accessed via useLocation\nexport default PetMedicalRecord;","map":{"version":3,"sources":["/Users/tungngo/Dropbox/Personal/Learning/React/webapp/petbook/web/src/medicals/PetMedicalRecord.js"],"names":["Link","useNavigate","useParams","useContext","useState","DataContext","api","FileUpload","FileDownload","MdDeleteForever","MdEditSquare","MdKeyboardDoubleArrowDown","MdKeyboardDoubleArrowUp","PetMedicalRecord","record","pet_id","userID","auth","id","navigate","popUpMenu","setPopUpMenu","PopUpMenu","confirmBox","window","confirm","handleMedicalDelete","console","log","delete","headers","accessToken","message","date","clinic","address","phone","doctor","agenda","attachment"],"mappings":"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","sourcesContent":["import { Link, useNavigate, useParams } from 'react-router-dom';\nimport { useContext, useState } from 'react';\nimport DataContext from '../context/DataContext';\nimport api from '../api/axios';\nimport FileUpload from \"../FileUpload\";\nimport FileDownload from '../FileDownload';\nimport { MdDeleteForever, MdEditSquare, MdKeyboardDoubleArrowDown, MdKeyboardDoubleArrowUp } from \"react-icons/md\";\n\n\nconst PetMedicalRecord = ({ record, pet_id }) => {\n    const { userID, auth } = useContext(DataContext);\n    const { id } = useParams(); // extract the id from the link\n    const navigate = useNavigate();\n    const [popUpMenu, setPopUpMenu] = useState(false);\n\n    function PopUpMenu() {\n        return (\n            <ul className=\"drop-down\">\n                <Link to = {`${record.id}/edit`} state = { record }>\n                    <button><MdEditSquare/></button>\n                </Link>\n                <button onClick={() => {\n                    const confirmBox = window.confirm(\"Do you really want to remove this record?\");\n                    confirmBox ? handleMedicalDelete() : console.log('No')}}>\n                    <MdDeleteForever/>\n                </button>\n                <FileDownload record_id = { record.id } pet_id = { pet_id }/>\n                <FileUpload record_id = { record.id } pet_id = { pet_id } />\n            </ul>\n        );\n    }\n\n    const handleMedicalDelete = async () => {\n        try {\n            await api.delete(`${userID}/pets/${id}/medical/${record.id}`, {\n                headers: {\n                    'x-access-token': auth.accessToken\n                }\n            });\n            navigate(`/post/${id}/medical`)\n        } catch (err) {\n            console.log(`Error: ${err.message}`)\n        }\n        navigate('/');\n    }\n    return (\n        <>\n            <div className=\"record\">\n                <h2 className=\"recordTitle\">{ record.date }</h2>\n                <li className=\"recordList\">ID: { record.id }</li>\n                <li className=\"recordList\">Clinic: { record.clinic }</li>\n                <li className=\"recordList\">Address: { record.address }</li>\n                <li className=\"recordList\">Phone: { record.phone }</li>\n                <li className=\"recordList\">Doctor: { record.doctor }</li>\n                <li className=\"recordList\">Reason: { record.agenda }</li>\n                <li className=\"recordList\">Attachment: { record.attachment }</li>\n\n                <button onClick={() => setPopUpMenu(!popUpMenu)}> \n                    { popUpMenu ? <MdKeyboardDoubleArrowUp/> : <MdKeyboardDoubleArrowDown/> }\n                </button>\n                {popUpMenu && PopUpMenu()}\n            </div>\n        </>\n    )\n}\n// sending props down Link through state. Then prop can be accessed via useLocation\n\nexport default PetMedicalRecord\n"]},"metadata":{},"sourceType":"module"}